<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="Description" content="Put your description here." />
    <base href="/" />

    <title>Lesson 1</title>
  </head>

  <script type="module">
    import "reveal.js/dist/reveal.css";
    import "reveal.js/dist/theme/black.css";
    import "reveal.js/plugin/highlight/monokai.css";
  </script>

  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <simple-popover>Hi!</simple-popover>
          <div>
            <directory-tree
              style="width: 400px; display: flex"
            ></directory-tree>
          </div>
        </section>
      </div>
    </div>

    <script type="module">
      import Reveal from "reveal.js";
      import Markdown from "reveal.js/plugin/markdown/markdown.esm.js";
      import RevealHighlight from "reveal.js/plugin/highlight/highlight.esm.js";
      import RevealNotes from "reveal.js/plugin/notes/notes.esm.js";
      import "../src/elements/simple-popover.ts";
      import "../src/elements/directory-tree.ts";

      document.querySelector("directory-tree").tree = {
        type: "directory",
        contents: {
          src: {
            type: "directory",
            contents: {
              grandparent: {
                type: "directory",
                contents: {
                  parent: {
                    type: "directory",
                    contents: {
                      my_module: {
                        type: "directory",
                        contents: {
                          "mod.rs": {
                            type: "file",
                            content: `fn main() {}`,
                          },
                        },
                      },
                      "m.rs": {
                        type: "file",
                        content: `

                          asdfasdf

                          adsf
                        `,
                      },
                    },
                  },
                  asdf: {
                    type: "file",
                    content: "asdfasdfasdf",
                  },
                },
              },
            },
          },
          adsf: {
            type: "file",
            content: "asdfasfd",
          },
        },
      };
      document.querySelector("directory-tree").highlightedPaths = [
        "/src/grandparent/parent/my_module",
        "/adsf",
      ];
      setTimeout(() => {
        document.querySelector("directory-tree").tree = {
          type: "directory",
          contents: {
            src: {
              type: "directory",
              contents: {
                grandparent: {
                  type: "directory",
                  contents: {
                    parent: {
                      type: "directory",
                      contents: {
                        "my_module.rs": {
                          type: "file",
                          content: `fn main() {}`,
                        },
                        "m.rs": {
                          type: "file",
                          content: `

                          asdfasdf

                          adsf
                        `,
                        },
                      },
                    },
                    asdf: {
                      type: "file",
                      content: "asdfasdfasdf",
                    },
                  },
                },
              },
            },
            adsf: {
              type: "file",
              content: "asdfasfd",
            },
          },
        };
        document.querySelector("directory-tree").highlightedPaths = [
          "/src/grandparent/parent/my_module.rs",
        ];
      }, 2000);

      let deck = new Reveal({
        transition: "none",
        plugins: [Markdown, RevealHighlight, RevealNotes],
      });
      deck.initialize();
    </script>
  </body>
</html>
